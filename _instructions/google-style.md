# コーディングガイドライン

- ファイルは次の順序で構成されます。また、存在する各セクションは、正確に 1 行の空白行で区切られます
  1. 著作権情報（ある場合）
  2. JSDoc（@fileoverview が存在する場合）
  3. import（存在する場合）
  4. ファイルの実装
- ファイルには最上位レベルの@fileoverview JSDoc が存在する場合があります。存在する場合、ファイルの内容、用途、依存関係に関する情報が説明されます
- 同じ（論理）プロジェクト内のファイルを参照する場合、コードでは絶対インポートではなく相対インポートを使用する必要があります。これにより、これらのインポートに変更を加えずにプロジェクトを移動できるようになります
- 親ステップ（`../../../`）の数を制限することを検討してください。親ステップの数によってモジュールとパスの構造がわかりにくくなる場合があります
- デフォルトのエクスポートを使用しないでください。デフォルトのエクスポートでは正規名が提供されないため、集中的なメンテナンスが困難になり、コード所有者にとってのメリットは比較的少なく、読みやすさが低下する可能性があります
- 変数を宣言するには、常に const または let を使用します。変数を再割り当てする必要がある場合を除き、デフォルトで const を使用します。var は使用しないでください
- 配列を初期化す場合、`[]`を使用します。特定のサイズで初期化する場合は、`Array.from`を使用します
- 配列では数値以外のプロパティを定義したり使用したりしないでください（`length`以外）
- 配列を作成する場合は、反復可能オブジェクトのみをスプレッドします。null および undefined を含むプリミティブはスプレッドしてはなりません
- Object コンストラクタは使用できません。代わりにオブジェクトリテラル（`{}`または`{a: 0, b: 1, c: 2}`）を使用してください
- `for (... in ...)`ループを使用すると、オブジェクト自身のプロパティだけでなく、そのプロトタイプチェーン上にあるすべての列挙可能なプロパティも含まれる可能性があります。これにより、意図しないプロパティがループ内で処理されることがあり、バグの原因となります。if ステートメントか`for (... of Object.keys(...))`を使用して値を明示的にフィルタリングしてください
- スプレッド構文を使用する場合、スプレッドされる値は作成される値と一致する必要があります。つまり、オブジェクトを作成する場合、スプレッドできるのはオブジェクトのみであり、配列とプリミティブ（null およびを含む undefined）はスプレッドできません
- クラス宣言はセミコロンで終了しないでください
- クラス式を含むステートメントはセミコロンで終了する必要があります
- クラスのメソッド宣言では、個々のメソッドの宣言を区切るためにセミコロンを使用しないでください
- クラスのメソッド宣言は、1 行の空白行で周囲のコードから分離する必要があります
- クラスの private static メソッドは避け、可能ならモジュール内のローカル関数（ファイル内で定義した関数）を使うべき
- メソッドの中で関数をネストする場合はアロー関数（=>）を優先する（アロー関数は外側の`this`をそのまま参照するので、意図しない`this`の変更を防げる）
- 関数式を使用しないでください。代わりにアロー関数を使用してください
- アロー関数の「省略形（concise body）」と「ブロック形（block body）」を適切に使い分けること。特に、戻り値を使わない関数では、暗黙的に値が返ることを避け、明示的に void を示すブロック {} を使うべき

```ts
// ❌ BAD: `console.log(v)` の戻り値（`undefined`）が暗黙的に返ってしまう
myPromise.then((v) => console.log(v));

// ❌ BAD: `void` を期待しているのに `1` を返してしまう
let f: () => void;
f = () => 1; // `1` が返るが、型チェックは通る
```

- コールバック関数として名前付き関数を直接渡すのではなく、アロー関数を使うべき（高階関数（map, filter, forEach など）がコールバックに渡す引数は、意図したものとは異なる場合があり、予期しない動作を引き起こす可能性があるため）
- 可変長引数を扱うときは`arguments`ではなくスプレッド構文（`...args`,`...rest`）を使う
- 関数の`{`の直後や`}`の直前に空行を入れない
- 関数内の空行は最小限にし、論理的なグループを作るために使う
- 単一引数のアロー関数（`x => x * 2`）の場合、引数の括弧は 推奨されるが、必須ではない。ただし、複数引数のときは括弧が必須なので、統一性を持たせるために単一引数でも括弧をつけるのが望ましい
- レスト（`...args`）やスプレッド（`...obj`）の後にスペースを入れない

TODO: 次ここから読む
https://google.github.io/styleguide/tsguide.html#string-literals
